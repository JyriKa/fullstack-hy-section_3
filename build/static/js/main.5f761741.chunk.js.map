{"version":3,"sources":["components/Notify.js","services/numbers.js","components/InputField.js","components/AddNew.js","components/NameAndNumber.js","components/ShowNumbers.js","App.js","index.js"],"names":["Notify","message","undefined","color","content","style","fontSize","backgroundColor","padding","className","baseUrl","numbers","addNew","newPerson","axios","post","then","response","data","getAll","get","tryDelete","id","delete","status","updateNumber","person","put","InputField","text","value","handler","onChange","AddNew","props","addNumber","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","NameAndNumber","name","number","onClick","data-id","ShowNumbers","persons","filterName","filter","e","split","find","n","toLowerCase","indexOf","map","App","colorSuccess","colorError","useState","setPersons","setFilter","setNewName","setNewNumber","setMessage","useEffect","p","removeFromPersons","notifyUser","setTimeout","event","target","preventDefault","window","confirm","uPerson","r","catch","console","log","askUpdate","length","concat","error","getAttribute","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5f761741.chunk.js","sourcesContent":["const Notify = ({ message }) => {\n    if (message === undefined) return <div></div>\n    const { color, content } = message\n    const style = {\n      fontSize: 20,\n      backgroundColor: color,\n      padding: '10px'\n    }\n\n    return (\n        <div className=\"error\" style={style}>\n          {content}\n        </div>\n    )\n}\n\nexport default Notify","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst addNew = (newPerson) => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => { return response.data })\n}\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => { return response.data })\n}\n\nconst tryDelete = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => { return response.status })\n}\n\nconst updateNumber = (person) => {\n    const request = axios.put((`${baseUrl}/${person.id}`), person)\n    return request.then(response => { return response.status })\n}\n\nconst numbers = { addNew, getAll, tryDelete, updateNumber }\n\nexport default numbers","import React from 'react';\n\nconst InputField = ({ text, value, handler }) => {\n    return (\n        <div>\n            {text} <input value={value} onChange={handler} />\n        </div>\n    )\n}\n\nexport default InputField\n","import InputField from './InputField'\n\nconst AddNew = (props) => {\n    const { addNumber, newName, handleNameChange, newNumber, handleNumberChange } = props\n    return (\n        <div>\n            <h2>Add new</h2>\n            <form onSubmit={addNumber}>\n                <InputField text=\"name\" value={newName} handler={handleNameChange} />\n                <InputField text=\"number\" value={newNumber} handler={handleNumberChange} />\n                <div>\n                    <button type=\"submit\">add</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default AddNew\n","import React from 'react';\n\nconst NameAndNumber = ({ person, handler }) => {\n    const { name, number, id } = person\n    return (\n        <div>\n            {name} {number}\n            <button onClick={handler} data-id={id} style={{ fontSize: '10px' }}>\n                Delete\n        </button>\n        </div>\n    )\n}\n\nexport default NameAndNumber\n","import React from 'react';\nimport NameAndNumber from './NameAndNumber';\n\nconst ShowNumbers = ({ persons, filterName, handler }) => {\n    const filtered = persons.filter(e => {\n        return e.name.split(' ').find(n =>\n            n.toLowerCase().indexOf(filterName.toLowerCase()) === 0)\n    })\n    const numbers = filtered.map(e =>\n        <NameAndNumber key={e.id} person={e} handler={handler} />)\n    return (\n        <div>\n            <h2>Numbers</h2>\n            <div>{numbers}</div>\n        </div>\n    )\n}\n\nexport default ShowNumbers\n","import React, { useState, useEffect } from 'react'\nimport Notify from './components/Notify'\nimport numbers from './services/numbers'\nimport InputField from './components/InputField'\nimport AddNew from './components/AddNew'\nimport ShowNumbers from './components/ShowNumbers'\n\nconst App = () => {\n  const colorSuccess = 'green'\n  const colorError = 'red'\n  const [persons, setPersons] = useState([])\n  const [filter, setFilter] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [message, setMessage] = useState(undefined)\n\n  useEffect(() => {\n    numbers.getAll().then(p => setPersons(p))\n  }, [])\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  const removeFromPersons = (id) => {\n    setPersons(persons.filter(p => p.id !== id))\n  }\n\n  const notifyUser = (color, content) => {\n    const newMessage = { color, content }\n    setMessage(newMessage)\n    setTimeout(() => setMessage(undefined), 6000)\n  }\n\n  const askUpdate = (person, newNumber) => {\n    if (!(window.confirm(`Update ${person.name} number?`)))\n      return\n    const uPerson = { ...person, number: newNumber }\n    numbers.updateNumber(uPerson).then(r => {\n      setPersons(persons.map(p => p.id !== uPerson.id ? p : uPerson))\n      notifyUser(colorSuccess, `${person.name} number updated`)\n    }).catch(r => {\n      console.log(r)\n      removeFromPersons(person.id)\n      notifyUser(colorError, `${person.name} number has been removed by another user`)\n    })\n  }\n\n  const addNumber = (event) => {\n    event.preventDefault()\n    const person = persons.find(e => e.name === newName)\n    if (person !== undefined) {\n      if (person.number === newNumber) {\n        notifyUser(colorError, `${newName} is already added to phonebook`)\n        return\n      }\n      askUpdate(person, newNumber)\n      return\n    }\n    const newPerson = { name: newName, number: newNumber }\n    if (newPerson.name.length < 1 || newPerson.number.length < 1) {\n      notifyUser(colorError, 'Missing name, number or both')\n      return\n    }\n    setNewName('')\n    setNewNumber('')\n    numbers.addNew(newPerson).then(r => {\n      setPersons(persons.concat(r))\n      notifyUser(colorSuccess, `Added ${r.name}`)\n    }).catch(r => {\n      notifyUser(colorError, r.response.data.error)\n    })\n\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleDelete = (event) => {\n    const id = event.target.getAttribute('data-id')\n    const person = persons.find(p => p.id === id)\n\n    if (!(window.confirm(`Delete ${person.name}?`)))\n      return\n\n    numbers.tryDelete(person.id).then(r => {\n      removeFromPersons(person.id)\n      notifyUser(colorSuccess, `${person.name} removed`)\n    }).catch(r => {\n      const code = r.response.status\n      if (code === 404) {\n        removeFromPersons(person.id)\n        notifyUser(colorError, `${person.name} number has already been removed from server`)\n        return\n      }\n      notifyUser(colorError, 'Something went wrong')\n    })\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notify message={message} />\n      <InputField text=\"filter shown with\" value={filter} handler={handleFilterChange} />\n      <AddNew addNumber={addNumber} newName={newName} handleNameChange={handleNameChange}\n        newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <ShowNumbers persons={persons} filterName={filter} handler={handleDelete} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}